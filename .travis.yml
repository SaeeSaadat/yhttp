language: python
python: 3.6
branches:
  only:
  - master
  - nightly
  - ci
  - "/^(release\\/)?v([1-9]\\d*!)?(0|[1-9]\\d*)(\\.(0|[1-9]\\d*))*((a|b|rc)(0|[1-9]\\d*))?(\\.post(0|[1-9]\\d*))?(\\.dev(0|[1-9]\\d*))?$/"
before_install:
- pip install -U pip setuptools wheel
- pip install -r requirements-ci.txt
install: pip install -e .
script: py.test -v --cov=yhttp
after_success: coveralls
deploy:
  provider: pypi
  skip_cleanup: true
  user: Vahid.Mardani
  password:
    secure: kqDY9NxJT9QbgbJSO7KfGpWNDNJaZ35H3Nq2ykDfceqqnMSt2nzO3UQSwTuH7lIWBaRJ17wwx6IiSwgmhsRtkNG3iO7QGOtFsFXIg4YISthObedPabsqLoe4MFdmt6a4EPLpj6gh8rXB6cOIc2Zg7z3NaNY2KeMvyJkqDMVO/RXy8fS0Ju7CLyaSfFWO+OvHHirnPrWTeaAxkefyTdr4vrdWXqlmIR1pgn+OQOs6XTUcPnrVivGzrvMJ6D0JJZwhEPsas5dq9Hc5UWbgBSzOAemE3mzMaxy0pbgneets/KUGx0ti9RtnuSYaMasha2kJV5MnKbof39iI/dbRdu4Cg9kSl63tITnhsgfRukceIPZqwORhmO9ZcKQrz4YASlX7kNOdIKj+NN1B50ciFyUIC5k1MJxQqsuaJ7w71YuZD5PJIRmSnewu79OspkOIPTdsV03LT5PwtghN8tFuP18Y9VunTWmOBn5s7OcHyrymUKX3ClttOqpJBXAAzj3dwV2PG++DAOGZAsiqgZTDNjnDwuobOL/VO+jp+zw6je/R+2J+1tx0nMku/Kp0prAEP42EfT17di3Z7bXmowj56keLWBJu/LNRpJAdm0qmrlyspeFfuck1a/NUBg/Sx9U1/0rZRGqpkCDlDcM12ZZ4ZNFegnEElpgygjuLcWp1bFoYJvA=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: yhttp/yhttp
    condition: "$TRAVIS_PYTHON_VERSION = 3.6"
