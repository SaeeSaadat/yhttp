language: python
python: 3.6
branches:
  only:
  - master
  - nightly
  - ci
  - "/^(release\\/)?v([1-9]\\d*!)?(0|[1-9]\\d*)(\\.(0|[1-9]\\d*))*((a|b|rc)(0|[1-9]\\d*))?(\\.post(0|[1-9]\\d*))?(\\.dev(0|[1-9]\\d*))?$/"
before_install:
- pip install -U pip setuptools wheel
- pip install -r requirements-ci.txt
install: pip install -e .
script: py.test -v --cov=yhttp
after_success: coveralls
deploy:
  provider: pypi
  skip_cleanup: true
  user: Vahid.Mardani
  password:
    secure: UoReLgUnfWbFTySXLaibpL+FFKfOwI7jtQsqjtJmb1f6HhfF3kArDGTvk8+ogxMkP4G6B4Qkt8XeKJvwRUs23lBygUeepJFVaCOoDg9xlPtvmaxognZ/qIidu2eqSzIwrhyiheO50nY5bIACgeM2dXU17WSjGEDbVgAWokFxDi4XIhjjNYBdhCR/BWabZZ2e6Wpw0Unq1SUTk9toyEOLLKPPISgqLKF2ovaNbZQ6ghLnXAn0HdUr6+5kY56uiVg+EXNTujqsI5x91Jmk0EcIqsauo7WS5neXeIijgylVwDwrHlPV8tsyBVfamKvTtuiW/h+ldVgsbO+oi+1iQLm+IGARiae5jIkXefdmWCq8gNm55r1OOxI0qac2iyw6P0mB6FWUsPfRbDO3goPc5EOg25RGiJU0s+b/uxF7s3sNaxQbByqGwA61xe3enWQ7qErWVSmdsLq3mVuywryfZUBiY3DlJnzLZiyjn4FHL7rQA2iSxuDAiblhLA4sYkRj2knhzxn5ytwGMaCYUh0gbEwFq2xR7+bDSaXSBakWHdxSYpoqBFjtkSaK/wzvQM1JO+l1vDW47YIVl6ROsyNBt0bWyOhdal8no7aBRf02rogh8K3Ns8ADrr5jx3oe4lWdKxg3XR8DmSI2utzBhliCND3+gp4aE32ABE4YQdUbG9rbrq8=
  on:
    tags: true
    distributions: sdist bdist_wheel
    repo: yhttp/yhttp
    condition: "$TRAVIS_PYTHON_VERSION = 3.6"
